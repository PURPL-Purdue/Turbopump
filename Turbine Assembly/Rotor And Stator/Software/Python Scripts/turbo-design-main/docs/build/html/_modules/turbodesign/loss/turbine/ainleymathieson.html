

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>turbodesign.loss.turbine.ainleymathieson &mdash; Turbo Design 1.0.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=e2a723ec"></script>
      <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/bladerow.html">BladeRow</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/bladerow.html#turbodesign.bladerow.BladeRow"><code class="docutils literal notranslate"><span class="pre">BladeRow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/bladerow.html#turbodesign.bladerow.compute_gas_constants"><code class="docutils literal notranslate"><span class="pre">compute_gas_constants()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/bladerow.html#turbodesign.bladerow.interpolate_quantities"><code class="docutils literal notranslate"><span class="pre">interpolate_quantities()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/bladerow.html#turbodesign.bladerow.interpolate_streamline_radii"><code class="docutils literal notranslate"><span class="pre">interpolate_streamline_radii()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/bladerow.html#turbodesign.bladerow.sutherland"><code class="docutils literal notranslate"><span class="pre">sutherland()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/coolant.html">Coolant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/coolant.html#turbodesign.coolant.Coolant"><code class="docutils literal notranslate"><span class="pre">Coolant</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/enums.html">Enums</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/enums.html#turbodesign.enums.LossType"><code class="docutils literal notranslate"><span class="pre">LossType</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/enums.html#turbodesign.enums.MassflowConstraint"><code class="docutils literal notranslate"><span class="pre">MassflowConstraint</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/enums.html#turbodesign.enums.PassageType"><code class="docutils literal notranslate"><span class="pre">PassageType</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/enums.html#turbodesign.enums.PowerType"><code class="docutils literal notranslate"><span class="pre">PowerType</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/enums.html#turbodesign.enums.RowType"><code class="docutils literal notranslate"><span class="pre">RowType</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/inlet.html">Inlet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/inlet.html#turbodesign.inlet.Inlet"><code class="docutils literal notranslate"><span class="pre">Inlet</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/isentropic.html">Isentropic Equations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/isentropic.html#turbodesign.isentropic.A_As"><code class="docutils literal notranslate"><span class="pre">A_As()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/isentropic.html#turbodesign.isentropic.FindMachP0P"><code class="docutils literal notranslate"><span class="pre">FindMachP0P()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/isentropic.html#turbodesign.isentropic.IsenP"><code class="docutils literal notranslate"><span class="pre">IsenP()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/isentropic.html#turbodesign.isentropic.IsenT"><code class="docutils literal notranslate"><span class="pre">IsenT()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/isentropic.html#turbodesign.isentropic.Massflow"><code class="docutils literal notranslate"><span class="pre">Massflow()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/loss.html">Turbine Loss</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#loss-type">Loss Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#ainley-mathieson">Ainley Mathieson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#traupel">Traupel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#craig-cox">Craig Cox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#kacker-okapuu">Kacker Okapuu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#turbine-design-default">Turbine Design (Default)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#fixed-pressure-loss">Fixed Pressure Loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/loss.html#fixed-efficiency-loss">Fixed Efficiency Loss</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/lossinterp.html">Loss Interpolations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/lossinterp.html#turbodesign.lossinterp.LossInterp"><code class="docutils literal notranslate"><span class="pre">LossInterp</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/outlet.html">Outlet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/outlet.html#turbodesign.outlet.Outlet"><code class="docutils literal notranslate"><span class="pre">Outlet</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/passage.html">Passage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/passage.html#turbodesign.passage.Passage"><code class="docutils literal notranslate"><span class="pre">Passage</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/radeq.html">Radial Equilibrium</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/radeq.html#turbodesign.radeq.radeq"><code class="docutils literal notranslate"><span class="pre">radeq()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/rotor.html">Rotor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/rotor.html#turbodesign.rotor.Rotor"><code class="docutils literal notranslate"><span class="pre">Rotor</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/solve_radeq.html">Solve Radial Equilibrium</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/solve_radeq.html#turbodesign.solve_radeq.adjust_streamlines"><code class="docutils literal notranslate"><span class="pre">adjust_streamlines()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/spool.html">Spool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/spool.html#turbodesign.spool.Spool"><code class="docutils literal notranslate"><span class="pre">Spool</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/td_math.html">Turbine Design Math</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.T0_coolant_weighted_average"><code class="docutils literal notranslate"><span class="pre">T0_coolant_weighted_average()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.compute_massflow"><code class="docutils literal notranslate"><span class="pre">compute_massflow()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.compute_power"><code class="docutils literal notranslate"><span class="pre">compute_power()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.compute_quantities"><code class="docutils literal notranslate"><span class="pre">compute_quantities()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.compute_reynolds"><code class="docutils literal notranslate"><span class="pre">compute_reynolds()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.inlet_calc"><code class="docutils literal notranslate"><span class="pre">inlet_calc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.rotor_calc"><code class="docutils literal notranslate"><span class="pre">rotor_calc()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/td_math.html#turbodesign.td_math.stator_calc"><code class="docutils literal notranslate"><span class="pre">stator_calc()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/turbinespool.html">Turbine Spool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../modules/turbinespool.html#turbodesign.turbinespool.TurbineSpool"><code class="docutils literal notranslate"><span class="pre">TurbineSpool</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Turbo Design</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">turbodesign.loss.turbine.ainleymathieson</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for turbodesign.loss.turbine.ainleymathieson</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span><span class="o">,</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">...bladerow</span><span class="w"> </span><span class="kn">import</span> <span class="n">BladeRow</span><span class="p">,</span> <span class="n">sutherland</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">...lossinterp</span><span class="w"> </span><span class="kn">import</span> <span class="n">LossInterp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">...enums</span><span class="w"> </span><span class="kn">import</span> <span class="n">RowType</span><span class="p">,</span> <span class="n">LossType</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">..losstype</span><span class="w"> </span><span class="kn">import</span> <span class="n">LossBaseClass</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">requests</span> 

<div class="viewcode-block" id="AinleyMathieson">
<a class="viewcode-back" href="../../../../modules/loss.html#turbodesign.loss.turbine.ainleymathieson.AinleyMathieson">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AinleyMathieson</span><span class="p">(</span><span class="n">LossBaseClass</span><span class="p">):</span>
        
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ainley Mathieson loss correlation used for loss estimation for Gas and Steam Turbines. If you are designing an impulse turbine, this could be a good model to start with.</span>
<span class="sd">        Use only with axial turbines. Loss correlations used with Reynolds numbers 1E5 to 3E5.</span>
<span class="sd">        </span>
<span class="sd">        Limitations:</span>
<span class="sd">            - Doesn&#39;t factor incidence Loss. </span>
<span class="sd">            - Steamturbines</span>
<span class="sd">            - Impulse Turbines beta1=alpha2</span>
<span class="sd">            - Reynolds Range </span>
<span class="sd">            </span>
<span class="sd">        Reference:</span>
<span class="sd">            Ainley, D. G., and Mathieson, G. C. R., &quot;A Method of Performance Estimation for Axial-Flow Turbines,&quot; British ARC, R &amp; M 2974, 1951.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">LossType</span><span class="o">.</span><span class="n">Pressure</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;TD3_HOME&#39;</span><span class="p">],</span><span class="s2">&quot;ainleymathieson&quot;</span><span class="o">+</span><span class="s2">&quot;.pkl&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/nasa/turbo-design/raw/main/references/Turbines/AinleyMathieson/ainleymathieson.pkl&quot;</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">absolute</span><span class="p">(),</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">):</span>
                    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">absolute</span><span class="p">(),</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c1"># type: ignore</span>
            
<div class="viewcode-block" id="AinleyMathieson.__call__">
<a class="viewcode-back" href="../../../../modules/loss.html#turbodesign.loss.turbine.ainleymathieson.AinleyMathieson.__call__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">row</span><span class="p">:</span><span class="n">BladeRow</span><span class="p">,</span> <span class="n">upstream</span><span class="p">:</span><span class="n">BladeRow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ainley Mathieson predicts the pressure loss of a turbine nozzle or rotor. Since these correlations are from Cascade experiments, the user should be familar with the reynolds and mach number requirements for each equation and figure. Using something outside the bounds can give inaccuare approximations of loss. Additionally these correlations were done on unoptimized blades so efficiencies maybe lower than what&#39;s attainable. Massflow can also be affected because exit P0 is affected. </span>
<span class="sd">        </span>
<span class="sd">        This code will attempt use the correct equations and warn the user if mach number is out of range.</span>
<span class="sd">        </span>
<span class="sd">        Note:</span>
<span class="sd">            alpha: gas flow angle relative to axial direction</span>
<span class="sd">            beta: blade angle relative to axial direction </span>
<span class="sd">            </span>
<span class="sd">        Args:</span>
<span class="sd">            upstream (BladeRow): Upstream blade row</span>
<span class="sd">            row (BladeRow): downstream blade row</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Pressure Loss at zero incidence </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Kp</span> <span class="o">=</span> <span class="mi">12300</span> <span class="c1"># Ft / (pdl C); 1 pdl = 0.138254954376 N :(</span>
        <span class="n">At</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">throat</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">pitch</span>
        <span class="n">Area_upstream</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">Area_downstream</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># mean radius </span>
        <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        
        <span class="n">s_c</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">pitch</span><span class="o">/</span><span class="n">row</span><span class="o">.</span><span class="n">chord</span>
        
        <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">row_type</span> <span class="o">==</span> <span class="n">RowType</span><span class="o">.</span><span class="n">Stator</span><span class="p">:</span>
            <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">alpha1</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">alpha1</span><span class="p">)</span>
            <span class="n">beta1</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">beta1_metal</span><span class="p">))</span>
            <span class="n">alpha2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">alpha2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&lt;</span><span class="mf">0.5</span><span class="p">:</span>
                <span class="n">alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fig05&#39;</span><span class="p">](</span><span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">throat</span><span class="o">/</span><span class="n">row</span><span class="o">.</span><span class="n">pitch</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&lt;</span><span class="mf">0.95</span><span class="p">:</span>
                <span class="n">X</span> <span class="o">=</span> <span class="mf">0.7</span>
                <span class="n">alpha2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span> 
                                   <span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">X</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span>
                                   <span class="o">+</span> <span class="n">X</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="n">h</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span>
                                   <span class="p">)</span>    <span class="c1"># Eqn 4</span>
            <span class="k">elif</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&lt;=</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&gt;</span><span class="mf">0.5</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Area_upstream</span><span class="o">/</span><span class="n">Area_downstream</span> <span class="o">&lt;</span><span class="mf">1.02</span> <span class="ow">and</span> <span class="n">Area_upstream</span><span class="o">/</span><span class="n">Area_downstream</span><span class="o">&gt;</span><span class="mf">0.98</span><span class="p">:</span> <span class="c1"># Not flared</span>
                    <span class="n">alpha2</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">At</span><span class="o">/</span><span class="n">Area_downstream</span><span class="p">)</span> <span class="c1"># Eqn 2</span>
                <span class="k">else</span><span class="p">:</span> <span class="c1"># Flared so use equation 3</span>
                    <span class="n">At</span> <span class="o">=</span> <span class="n">At</span><span class="o">/</span><span class="n">s</span> <span class="o">*</span> <span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">Area_downstream</span> <span class="o">+</span> <span class="n">Area_upstream</span><span class="p">)</span><span class="o">/</span><span class="mi">6</span> <span class="c1"># Eqn 3</span>
            <span class="n">B</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="c1"># Eqn 6 </span>
        <span class="k">else</span><span class="p">:</span>   <span class="c1"># Rotor</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">tip_clearance</span>
            <span class="n">alpha1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">beta1</span><span class="p">)</span>
            <span class="n">beta1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">beta1_metal</span><span class="p">))</span>
            <span class="n">alpha2</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">beta2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">M_rel</span><span class="o">&lt;</span><span class="mf">0.5</span><span class="p">:</span>
                <span class="n">alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fig05&#39;</span><span class="p">](</span><span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">throat</span><span class="o">/</span><span class="n">row</span><span class="o">.</span><span class="n">pitch</span><span class="p">)))</span>
            <span class="k">elif</span> <span class="n">row</span><span class="o">.</span><span class="n">M_rel</span><span class="o">&lt;</span><span class="mf">0.95</span><span class="p">:</span>
                <span class="n">X</span> <span class="o">=</span> <span class="mf">1.35</span> <span class="c1"># Shrouded Blade</span>
                <span class="n">alpha2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span> 
                                   <span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">X</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span>
                                   <span class="o">+</span> <span class="n">X</span><span class="o">*</span><span class="n">k</span><span class="o">/</span><span class="n">h</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span>
                                   <span class="p">)</span>    <span class="c1"># Eqn 4</span>
            <span class="k">elif</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&lt;=</span><span class="mf">1.05</span> <span class="ow">and</span> <span class="n">row</span><span class="o">.</span><span class="n">M</span><span class="o">&gt;=</span><span class="mf">0.95</span><span class="p">:</span>
                <span class="n">alpha2</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">At</span><span class="o">/</span><span class="n">Area_downstream</span><span class="p">)</span> <span class="c1"># Eqn 2</span>
                
            <span class="n">B</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1"># Eqn 6 </span>
            
        
        <span class="n">t_c</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">;</span> <span class="c1"># Impulse turbine 0.15 &lt; t/c &lt; 0.25    </span>
        
        <span class="n">ID</span> <span class="o">=</span> <span class="p">(</span><span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span> <span class="n">OD</span> <span class="o">=</span> <span class="p">(</span><span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">A1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">upstream</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">beta1</span><span class="p">)</span>
        <span class="n">A2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">row</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span>
        <span class="n">lam</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fig08&#39;</span><span class="p">]((</span><span class="n">A2</span><span class="o">/</span><span class="n">A1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">ID</span><span class="o">/</span><span class="n">OD</span><span class="p">))</span> <span class="c1"># Eqn but using Figure 8</span>
        <span class="n">alpha_m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha1</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha2</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">Cl_s_c</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha1</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">alpha2</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_m</span><span class="p">)</span>
        <span class="c1"># calculated but not used </span>
        <span class="n">Y_secondary_clearance</span> <span class="o">=</span> <span class="p">(</span><span class="n">lam</span> <span class="o">+</span> <span class="n">B</span> <span class="o">*</span> <span class="n">k</span><span class="o">/</span><span class="n">h</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">Cl_s_c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha2</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha_m</span><span class="p">))</span> <span class="c1"># Eqn 6</span>
        
        
        <span class="n">Yp_beta0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fig04a&#39;</span><span class="p">](</span><span class="n">s_c</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">alpha2</span><span class="p">))</span>
        <span class="n">Yp_beta1_eq_alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fig04b&#39;</span><span class="p">](</span><span class="n">s_c</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">alpha2</span><span class="p">))</span>
        
        <span class="n">Yp_i0</span> <span class="o">=</span> <span class="p">(</span><span class="n">Yp_beta0</span> <span class="o">+</span> <span class="p">(</span><span class="n">beta1</span><span class="o">/</span><span class="n">alpha2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span><span class="p">(</span><span class="n">Yp_beta1_eq_alpha2</span> <span class="o">-</span> <span class="n">Yp_beta0</span><span class="p">))</span> <span class="o">*</span><span class="p">(</span><span class="n">t_c</span><span class="o">/</span><span class="mf">0.2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="n">beta1</span><span class="o">/</span><span class="n">alpha2</span><span class="p">)</span> <span class="c1"># Fig 4 and Eqn 5</span>
        
        <span class="n">Yt</span> <span class="o">=</span> <span class="n">Yp_i0</span> <span class="o">+</span> <span class="n">Y_secondary_clearance</span> 
        <span class="k">return</span> <span class="n">Yt</span>   <span class="c1"># Profile loss at zero incidence </span></div>
</div>

        
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Paht Juangphanich.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>